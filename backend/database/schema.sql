-- Criar tabela de usuários
CREATE TABLE IF NOT EXISTS users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  login TEXT UNIQUE NOT NULL,
  senha TEXT NOT NULL,
  turma TEXT NOT NULL,
  escola TEXT NOT NULL,
  xp_atual INTEGER DEFAULT 0,
  erros INTEGER DEFAULT 0,
  id_q1 INTEGER,
  response_q1 BOOLEAN DEFAULT 0,
  id_q2 INTEGER,
  response_q2 BOOLEAN DEFAULT 0,
  id_q3 INTEGER,
  response_q3 BOOLEAN DEFAULT 0,
  id_q4 INTEGER,
  response_q4 BOOLEAN DEFAULT 0,
  id_q5 INTEGER,
  response_q5 BOOLEAN DEFAULT 0,
  -- Novos campos para rastrear respostas
  respostas_incorretas INTEGER DEFAULT 0,
  respostas_atrasadas INTEGER DEFAULT 0,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Criar tabela de perguntas
CREATE TABLE IF NOT EXISTS perguntas (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  pergunta TEXT NOT NULL,
  imagem TEXT,
  dica TEXT,
  a1 TEXT NOT NULL,
  a2 TEXT NOT NULL,
  a3 TEXT NOT NULL,
  a4 TEXT NOT NULL,
  a5 TEXT NOT NULL,
  ac INTEGER NOT NULL CHECK (ac >= 1 AND ac <= 5),
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Inserir 100 perguntas de exemplo (matemática simples)
INSERT INTO perguntas (pergunta, dica, a1, a2, a3, a4, a5, ac) VALUES
-- Pergunta especial de frações (exemplo específico)
('No caderno 2 de Matemática, capítulo 5 você aprende sobre frações. Qual das seguintes frações é equivalente a 2/4?', 'Frações equivalentes representam a mesma quantidade. Tente simplificar 2/4.', '1/2', '1/3', '1/4', '2/3', '3/4', 1),
-- Perguntas 2-21: Soma
('Quanto é 15 + 27?', 'Some primeiro as unidades, depois as dezenas', '40', '42', '41', '43', '39', 2),
('Qual é o resultado de 34 + 18?', '34 + 18 = 52', '50', '51', '52', '53', '54', 3),
('Quanto é 45 + 23?', '45 + 23 = 68', '66', '67', '68', '69', '70', 3),
('Qual é a soma de 67 + 12?', '67 + 12 = 79', '77', '78', '79', '80', '81', 3),
('Quanto é 89 + 11?', '89 + 11 = 100', '98', '99', '100', '101', '102', 3),
('Qual é o resultado de 56 + 44?', '56 + 44 = 100', '98', '99', '100', '101', '102', 3),
('Quanto é 23 + 77?', '23 + 77 = 100', '98', '99', '100', '101', '102', 3),
('Qual é a soma de 12 + 88?', '12 + 88 = 100', '98', '99', '100', '101', '102', 3),
('Quanto é 34 + 66?', '34 + 66 = 100', '98', '99', '100', '101', '102', 3),
('Qual é o resultado de 45 + 55?', '45 + 55 = 100', '98', '99', '100', '101', '102', 3),
('Quanto é 67 + 33?', '67 + 33 = 100', '98', '99', '100', '101', '102', 3),
('Qual é a soma de 78 + 22?', '78 + 22 = 100', '98', '99', '100', '101', '102', 3),
('Quanto é 89 + 11?', '89 + 11 = 100', '98', '99', '100', '101', '102', 3),
('Qual é o resultado de 91 + 9?', '91 + 9 = 100', '98', '99', '100', '101', '102', 3),
('Quanto é 82 + 18?', '82 + 18 = 100', '98', '99', '100', '101', '102', 3),
('Qual é a soma de 73 + 27?', '73 + 27 = 100', '98', '99', '100', '101', '102', 3),
('Quanto é 64 + 36?', '64 + 36 = 100', '98', '99', '100', '101', '102', 3),
('Qual é o resultado de 55 + 45?', '55 + 45 = 100', '98', '99', '100', '101', '102', 3),
('Quanto é 46 + 54?', '46 + 54 = 100', '98', '99', '100', '101', '102', 3),
('Qual é a soma de 37 + 63?', '37 + 63 = 100', '98', '99', '100', '101', '102', 3),

-- Perguntas 21-40: Subtração
('Quanto é 50 - 25?', '50 - 25 = 25', '23', '24', '25', '26', '27', 3),
('Qual é o resultado de 100 - 30?', '100 - 30 = 70', '68', '69', '70', '71', '72', 3),
('Quanto é 75 - 15?', '75 - 15 = 60', '58', '59', '60', '61', '62', 3),
('Qual é a diferença de 90 - 20?', '90 - 20 = 70', '68', '69', '70', '71', '72', 3),
('Quanto é 80 - 35?', '80 - 35 = 45', '43', '44', '45', '46', '47', 3),
('Qual é o resultado de 60 - 25?', '60 - 25 = 35', '33', '34', '35', '36', '37', 3),
('Quanto é 95 - 40?', '95 - 40 = 55', '53', '54', '55', '56', '57', 3),
('Qual é a diferença de 70 - 15?', '70 - 15 = 55', '53', '54', '55', '56', '57', 3),
('Quanto é 85 - 30?', '85 - 30 = 55', '53', '54', '55', '56', '57', 3),
('Qual é o resultado de 65 - 20?', '65 - 20 = 45', '43', '44', '45', '46', '47', 3),
('Quanto é 100 - 45?', '100 - 45 = 55', '53', '54', '55', '56', '57', 3),
('Qual é a diferença de 90 - 35?', '90 - 35 = 55', '53', '54', '55', '56', '57', 3),
('Quanto é 75 - 25?', '75 - 25 = 50', '48', '49', '50', '51', '52', 3),
('Qual é o resultado de 80 - 30?', '80 - 30 = 50', '48', '49', '50', '51', '52', 3),
('Quanto é 95 - 45?', '95 - 45 = 50', '48', '49', '50', '51', '52', 3),
('Qual é a diferença de 70 - 20?', '70 - 20 = 50', '48', '49', '50', '51', '52', 3),
('Quanto é 85 - 35?', '85 - 35 = 50', '48', '49', '50', '51', '52', 3),
('Qual é o resultado de 60 - 10?', '60 - 10 = 50', '48', '49', '50', '51', '52', 3),
('Quanto é 100 - 50?', '100 - 50 = 50', '48', '49', '50', '51', '52', 3),
('Qual é a diferença de 90 - 40?', '90 - 40 = 50', '48', '49', '50', '51', '52', 3),

-- Perguntas 41-60: Multiplicação
('Quanto é 5 x 6?', '5 x 6 = 30', '28', '29', '30', '31', '32', 3),
('Qual é o resultado de 7 x 8?', '7 x 8 = 56', '54', '55', '56', '57', '58', 3),
('Quanto é 9 x 4?', '9 x 4 = 36', '34', '35', '36', '37', '38', 3),
('Qual é o produto de 6 x 7?', '6 x 7 = 42', '40', '41', '42', '43', '44', 3),
('Quanto é 8 x 5?', '8 x 5 = 40', '38', '39', '40', '41', '42', 3),
('Qual é o resultado de 4 x 9?', '4 x 9 = 36', '34', '35', '36', '37', '38', 3),
('Quanto é 3 x 8?', '3 x 8 = 24', '22', '23', '24', '25', '26', 3),
('Qual é o produto de 7 x 6?', '7 x 6 = 42', '40', '41', '42', '43', '44', 3),
('Quanto é 5 x 8?', '5 x 8 = 40', '38', '39', '40', '41', '42', 3),
('Qual é o resultado de 9 x 3?', '9 x 3 = 27', '25', '26', '27', '28', '29', 3),
('Quanto é 6 x 4?', '6 x 4 = 24', '22', '23', '24', '25', '26', 3),
('Qual é o produto de 8 x 7?', '8 x 7 = 56', '54', '55', '56', '57', '58', 3),
('Quanto é 4 x 6?', '4 x 6 = 24', '22', '23', '24', '25', '26', 3),
('Qual é o resultado de 7 x 5?', '7 x 5 = 35', '33', '34', '35', '36', '37', 3),
('Quanto é 9 x 6?', '9 x 6 = 54', '52', '53', '54', '55', '56', 3),
('Qual é o produto de 3 x 7?', '3 x 7 = 21', '19', '20', '21', '22', '23', 3),
('Quanto é 8 x 4?', '8 x 4 = 32', '30', '31', '32', '33', '34', 3),
('Qual é o resultado de 6 x 8?', '6 x 8 = 48', '46', '47', '48', '49', '50', 3),
('Quanto é 5 x 9?', '5 x 9 = 45', '43', '44', '45', '46', '47', 3),
('Qual é o produto de 7 x 4?', '7 x 4 = 28', '26', '27', '28', '29', '30', 3),

-- Perguntas 61-80: Divisão
('Quanto é 20 ÷ 4?', '20 ÷ 4 = 5', '3', '4', '5', '6', '7', 3),
('Qual é o resultado de 30 ÷ 6?', '30 ÷ 6 = 5', '3', '4', '5', '6', '7', 3),
('Quanto é 40 ÷ 8?', '40 ÷ 8 = 5', '3', '4', '5', '6', '7', 3),
('Qual é o quociente de 50 ÷ 10?', '50 ÷ 10 = 5', '3', '4', '5', '6', '7', 3),
('Quanto é 15 ÷ 3?', '15 ÷ 3 = 5', '3', '4', '5', '6', '7', 3),
('Qual é o resultado de 25 ÷ 5?', '25 ÷ 5 = 5', '3', '4', '5', '6', '7', 3),
('Quanto é 35 ÷ 7?', '35 ÷ 7 = 5', '3', '4', '5', '6', '7', 3),
('Qual é o quociente de 45 ÷ 9?', '45 ÷ 9 = 5', '3', '4', '5', '6', '7', 3),
('Quanto é 60 ÷ 12?', '60 ÷ 12 = 5', '3', '4', '5', '6', '7', 3),
('Qual é o resultado de 70 ÷ 14?', '70 ÷ 14 = 5', '3', '4', '5', '6', '7', 3),
('Quanto é 80 ÷ 16?', '80 ÷ 16 = 5', '3', '4', '5', '6', '7', 3),
('Qual é o quociente de 90 ÷ 18?', '90 ÷ 18 = 5', '3', '4', '5', '6', '7', 3),
('Quanto é 100 ÷ 20?', '100 ÷ 20 = 5', '3', '4', '5', '6', '7', 3),
('Qual é o resultado de 24 ÷ 6?', '24 ÷ 6 = 4', '2', '3', '4', '5', '6', 3),
('Quanto é 32 ÷ 8?', '32 ÷ 8 = 4', '2', '3', '4', '5', '6', 3),
('Qual é o quociente de 40 ÷ 10?', '40 ÷ 10 = 4', '2', '3', '4', '5', '6', 3),
('Quanto é 48 ÷ 12?', '48 ÷ 12 = 4', '2', '3', '4', '5', '6', 3),
('Qual é o resultado de 56 ÷ 14?', '56 ÷ 14 = 4', '2', '3', '4', '5', '6', 3),
('Quanto é 64 ÷ 16?', '64 ÷ 16 = 4', '2', '3', '4', '5', '6', 3),
('Qual é o quociente de 72 ÷ 18?', '72 ÷ 18 = 4', '2', '3', '4', '5', '6', 3),

-- Perguntas 81-100: Misturadas
('Quanto é 12 + 8?', '12 + 8 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o resultado de 25 - 5?', '25 - 5 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 4 x 5?', '4 x 5 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o quociente de 40 ÷ 2?', '40 ÷ 2 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 15 + 5?', '15 + 5 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o resultado de 30 - 10?', '30 - 10 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 5 x 4?', '5 x 4 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o quociente de 60 ÷ 3?', '60 ÷ 3 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 10 + 10?', '10 + 10 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o resultado de 35 - 15?', '35 - 15 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 2 x 10?', '2 x 10 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o quociente de 80 ÷ 4?', '80 ÷ 4 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 16 + 4?', '16 + 4 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o resultado de 45 - 25?', '45 - 25 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 10 x 2?', '10 x 2 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o quociente de 100 ÷ 5?', '100 ÷ 5 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 18 + 2?', '18 + 2 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o resultado de 50 - 30?', '50 - 30 = 20', '18', '19', '20', '21', '22', 3),
('Quanto é 1 x 20?', '1 x 20 = 20', '18', '19', '20', '21', '22', 3),
('Qual é o quociente de 120 ÷ 6?', '120 ÷ 6 = 20', '18', '19', '20', '21', '22', 3);

-- Inserir alguns usuários de exemplo
INSERT INTO users (login, senha, turma, escola, xp_atual, erros, id_q1, id_q2, id_q3, id_q4, id_q5) VALUES
('aluno001', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série A', 'Colégio Estadual da Bahia', 490, 2, 1, 15, 42, 73, 28),
('aluno002', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série A', 'Colégio Estadual da Bahia', 450, 1, 2, 23, 67, 34, 89),
('aluno003', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série A', 'Colégio Estadual da Bahia', 420, 3, 3, 45, 78, 56, 19),
('aluno004', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série B', 'Colégio Modelo', 380, 2, 4, 67, 29, 91, 44),
('aluno005', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série B', 'Colégio Modelo', 350, 1, 5, 89, 13, 47, 82),
('aluno006', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '2ª Série A', 'Colégio Estadual da Bahia', 320, 4, 6, 12, 58, 93, 26),
('aluno007', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '2ª Série A', 'Colégio Estadual da Bahia', 290, 2, 7, 34, 79, 15, 68),
('aluno008', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série C', 'Colégio Estadual da Bahia', 260, 3, 8, 56, 21, 87, 39),
('aluno009', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série C', 'Colégio Estadual da Bahia', 230, 1, 9, 78, 43, 29, 95),
('aluno010', '$2b$10$rQZ8K9mN2pL1sX3vY5wQ7e', '3ª Série C', 'Colégio Estadual da Bahia', 200, 2, 10, 91, 65, 38, 72);

-- Mostrar estatísticas
SELECT 
  'Estatísticas do Banco' as info,
  COUNT(*) as total_perguntas,
  (SELECT COUNT(*) FROM users) as total_usuarios
FROM perguntas; 